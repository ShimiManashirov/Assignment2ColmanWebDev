### Variables
@hostname = localhost
@port = 3000
@baseUrl = http://{{hostname}}:{{port}}

### 1. User Registration
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
    "username": "testuser",
    "password": "testpassword",
    "email": "testuser@example.com"
}

###

### 2. User Login
# @name login
# This request captures the tokens automatically for subsequent requests
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
    "username": "testuser",
    "password": "testpassword"
}

### Capture Tokens from Login Response
@accessToken = {{login.response.body.accessToken}}
@refreshToken = {{login.response.body.refreshToken}}

###

### 3. Get All Posts
GET {{baseUrl}}/posts
Authorization: Bearer {{accessToken}}

### 4. Get Post By ID
GET {{baseUrl}}/posts/6971101fdd29eb2ff80977fc
Authorization: Bearer {{accessToken}}

### 5. Create New Post
POST {{baseUrl}}/posts
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
    "title": "New Sample",
    "content": "Body text",
    "userId": "6971101fdd29eb2ff80977fc"
}

### 6. Update Post
PUT {{baseUrl}}/posts/6971101fdd29eb2ff80977fc
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
    "title": "Updated Sample",
    "content": "Updated Body text",
    "userId": "6971101fdd29eb2ff80977fc"
}

###

### 7. Get Comments for a Post
GET {{baseUrl}}/posts/6971101fdd29eb2ff80977fc/comments
Authorization: Bearer {{accessToken}}

### 8. Create Comment for a Post
POST {{baseUrl}}/posts/6971101fdd29eb2ff80977fc/comments
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
    "content": "This is a new comment",
    "userId": "6971101fdd29eb2ff80977fc"
}

### 9. Update Comment
PUT {{baseUrl}}/posts/6971101fdd29eb2ff80977fc/comments/69711075dd29eb2ff8097816
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
    "content": "Updated comment content",
    "userId": "6971101fdd29eb2ff80977fc"
}

### 10. Delete Comment
DELETE {{baseUrl}}/posts/6971101fdd29eb2ff80977fc/comments/69711075dd29eb2ff8097816
Authorization: Bearer {{accessToken}}

###

### 11. Token Refresh   
# Uses the refreshToken captured during login
POST {{baseUrl}}/auth/refresh
Content-Type: application/json

{
    "refreshToken": "{{refreshToken}}"
}

### 12. Logout
POST {{baseUrl}}/auth/logout
Content-Type: application/json

{
    "refreshToken": "{{refreshToken}}"
}